---
import { Icon } from 'astro-icon/components'
---

<header class="fixed top-0 w-full z-40">
  <nav class="bg-background text-foreground transition-colors duration-300">
    <div
      class="container mx-auto flex px-6 justify-between items-center py-6 sm:px-20 2xl:px-16"
    >
      <h2>
        <a href="/" class="text-foreground"
          ><svg
            role="img"
            width="50"
            viewBox="0 0 67 45"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="main-logo group"
          >
            <title>Home</title>
            <rect
              x="18.6135"
              y="31.6147"
              width="34.7861"
              height="8.08374"
              rx="1.79536"
              transform="rotate(-45 18.6135 31.6147)"
              class="yellow-logo-bar group-hover:animate-pulse duration-75"
              style="animation-duration: 800ms; transition-timing-function: ease;"
              fill="#FFB800"></rect>
            <rect
              x="45.6096"
              y="37.8223"
              width="21.9932"
              height="8.18162"
              rx="1.79536"
              transform="rotate(-45 45.6096 37.8223)"
              fill="currentColor"></rect>
            <rect
              width="22.9509"
              height="8.12147"
              rx="1.79536"
              transform="matrix(-0.707107 -0.707107 -0.707107 0.707107 66.9343 16.6172)"
              fill="currentColor"></rect>
            <rect
              width="23.2013"
              height="8.39914"
              rx="1.79536"
              transform="matrix(-0.707107 -0.707107 -0.707107 0.707107 23.2441 38.6763)"
              fill="currentColor"></rect>
            <rect
              x="1.31689"
              y="16.8687"
              width="21.9932"
              height="7.76636"
              rx="1.79536"
              transform="rotate(-45 1.31689 16.8687)"
              fill="currentColor"></rect>
          </svg><span class="hidden">Home</span></a
        >
      </h2>
      <button id="theme-toggle" aria-label="Toggle Dark Mode">
        <Icon name="mdi:brightness-6" size={26} />
      </button>
    </div>
  </nav>
</header>

<script is:inline>
  const theme = (() => {
    if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
      return localStorage.getItem('theme')
    }
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      return 'dark'
    }
    return 'light'
  })()

  if (theme === 'light') {
    document.documentElement.classList.remove('dark')
  } else {
    document.documentElement.classList.add('dark')
  }

  window.localStorage.setItem('theme', theme)

  const handleToggleClick = () => {
    console.log('clicked')
    const element = document.documentElement
    element.classList.toggle('dark')

    const isDark = element.classList.contains('dark')
    localStorage.setItem('theme', isDark ? 'dark' : 'light')
  }

  document
    .getElementById('theme-toggle')
    .addEventListener('click', handleToggleClick)
</script>
